(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{153:function(e,t,a){},178:function(e,t){},180:function(e,t){},194:function(e,t){},196:function(e,t){},224:function(e,t){},226:function(e,t){},227:function(e,t){},232:function(e,t){},234:function(e,t){},253:function(e,t){},265:function(e,t){},268:function(e,t){},287:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a(1),s=a.n(n),o=a(144),r=a.n(o),l=(a(153),a(8)),i=a(4),d=a(73),j=a.n(d),b=a(145),m=a(146),u="https://ecmm1.herokuapp.com/api/",h=a.n(m).a.create({baseURL:u,timeout:5e3,headers:{Authorization:localStorage.getItem("access_token")?"JWT "+localStorage.getItem("access_token"):null,"Content-Type":"application/json",accept:"application/json"}});h.interceptors.response.use((function(e){return e}),function(){var e=Object(b.a)(j.a.mark((function e(t){var a,c,n,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,"undefined"!==typeof t.response){e.next=4;break}return alert("A server/network error occurred. Looks like CORS might be the problem. Sorry about this - we will get it fixed shortly."),e.abrupt("return",Promise.reject(t));case 4:if(401!==t.response.status||a.url!==u+"token/refresh/"){e.next=7;break}return window.location.href="/login/",e.abrupt("return",Promise.reject(t));case 7:if("token_not_valid"!==t.response.data.code||401!==t.response.status||"Unauthorized"!==t.response.statusText){e.next=23;break}if(!(c=localStorage.getItem("refresh_token"))){e.next=21;break}if(n=JSON.parse(atob(c.split(".")[1])),s=Math.ceil(Date.now()/1e3),console.log(n.exp),!(n.exp>s)){e.next=17;break}return e.abrupt("return",h.post("/token/refresh/",{refresh:c}).then((function(e){return localStorage.setItem("access_token",e.data.access),localStorage.setItem("refresh_token",e.data.refresh),h.defaults.headers.Authorization="JWT "+e.data.access,a.headers.Authorization="JWT "+e.data.access,h(a)})).catch((function(e){console.log(e)})));case 17:console.log("Refresh token is expired",n.exp,s),window.location.href="/login/";case 19:e.next=23;break;case 21:console.log("Refresh token not available."),window.location.href="/login/";case 23:return e.abrupt("return",Promise.reject(t));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var p=h;function x(){return p.get("carts/order"),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"rightSection",id:"card",children:"Your Order Have Been Completed, We Will Contatce With You Soon"})})}var O=a(48),f=a(16);function g(){var e=new FormData;return e.append("cart",2),e.append("item",3),e.append("quantity",50),e.append("line_item_total",200),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"",children:"CartItem"})})}var v=a(47),N=a.n(v);function y(){var e="",t=localStorage.getItem("access_token")?localStorage.getItem("access_token"):null;if(t){var s=t,o=a(85).decode(s);e=o.user_id}console.log(e,"This is user");var r=Object(n.useState)([]),i=Object(f.a)(r,2),d=i[0],j=i[1],b=Object(n.useState)([]),m=Object(f.a)(b,2),u=m[0],h=m[1],x=Object(n.useState)([]),g=Object(f.a)(x,2),v=(g[0],g[1],Object(n.useState)([])),y=Object(f.a)(v,2),k=y[0],w=y[1],_=Object(n.useState)(0),S=Object(f.a)(_,2),C=S[0],I=S[1],T=Object(n.useState)(!1),E=Object(f.a)(T,2),M=E[0],A=E[1];Object(n.useEffect)((function(){p.get("products/").then((function(e){var t=e.data;console.log(t,"All Products"),j(t)}))}),[j]);return Object(c.jsxs)("div",{children:[Object(c.jsx)(N.a,{bottom:!0,cascade:!0,children:Object(c.jsx)("div",{className:"leftSection",children:d.map((function(t){return Object(c.jsxs)("div",{className:"card",tabIndex:-1,children:[Object(c.jsx)("img",{src:t.image,style:{width:"100%",height:"250px"}}),Object(c.jsx)("h5",{children:t.title}),Object(c.jsxs)("p",{className:"price",children:[t.price," Tk"]}),Object(c.jsx)("p",{children:Object(c.jsx)("button",{onClick:function(){return function(t){if(e){var a=new FormData;a.append("item",t.id),a.append("quantity",1),console.log(t,"This is the product"),p.post("carts/details",a);var c=!0;if(u.forEach((function(e){e.item===t.id&&(e.quantity++,e.line_item_total=parseInt(e.line_item_total)+parseInt(t.price),e.line_item_total=e.line_item_total+".00",h(Object(O.a)(u),u),I(C+parseInt(t.price)),console.log(e.quantity,"The quentity"),console.log(e,"Already exist in list"),c=!1)})),1==c){console.log("added this item");var n={item:t.id,item_title:t.title,quantity:1,line_item_total:t.price};console.log(n,"This is new object");var s=u.length;u[s]=n,h(Object(O.a)(u),u),I(C+parseInt(t.price)),c=!1}}}(t)},children:"Add to Cart"})})]},t.id)}))})}),Object(c.jsxs)("div",{className:"rigthSection",children:[void Object(n.useEffect)((function(){e&&(p.get("carts/").then((function(e){w(e.data),h(e.data),console.log(k,"All Cart")})),p.get("carts/cart").then((function(e){e.data.forEach((function(e){I(parseInt(e.total))}))})))}),[w]),Object(c.jsx)(N.a,{left:!0,cascade:!0,children:Object(c.jsxs)("div",{className:"cartt",children:[e&&Object(c.jsx)("div",{children:Object(c.jsxs)("h5",{children:[" You have ",u.length," Items in your cart "]})}),u.map((function(e){return Object(c.jsx)("div",{className:"cartText",tabIndex:-1,children:Object(c.jsxs)("div",{children:[">",e.item_title,"--",(e.quantity<10?"0":"")+e.quantity,"p =="," ",e.line_item_total," Tk",Object(c.jsx)("button",{className:"ml-2 rmButton",onClick:function(){return function(e){var t=new FormData;t.append("item",e.item),t.append("quantity",0),p.post("carts/details",t),h(Object(O.a)(u.filter((function(t){return t.item!=e.item})))),I(C-parseInt(e.line_item_total))}(e)},children:"Remove"})]})},e.item)}))]})}),e?Object(c.jsx)("div",{children:C?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"amount",children:["Total==",C,".00 Tk",Object(c.jsx)("button",{onClick:function(){return console.log(M,"Show is here"),void A(0==M)},className:"proceedBtn",children:"Proceed"})]}),M&&Object(c.jsx)(N.a,{right:!0,cascade:!0,children:Object(c.jsx)("div",{children:Object(c.jsxs)("form",{children:[Object(c.jsx)("label",{for:"fname",children:"Your Name:"}),Object(c.jsx)("input",{type:"text",id:"fname",name:"fname"}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{for:"lname",children:"Mobile Number:"}),Object(c.jsx)("input",{type:"text",id:"lname",name:"lname"}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{children:Object(c.jsx)(l.c,{className:"orderButton",exact:!0,to:"/carts",children:"CheckOut"})})]})})})]}):""}):Object(c.jsx)("h5",{children:"You Must Be Login First To add Item in your cart"})]})]})}var k=function(){var e=localStorage.getItem("access_token");return console.log(e,"This is token"),Object(c.jsx)("div",{children:Object(c.jsx)(y,{})})},w=a(28),_=a(29),S=function(){var e=Object(i.f)(),t=Object.freeze({email:"",password:""}),a=Object(n.useState)(t),s=Object(f.a)(a,2),o=s[0],r=s[1],l=function(e){r(Object(_.a)(Object(_.a)({},o),{},Object(w.a)({},e.target.name,e.target.value.trim())))};return Object(c.jsx)("div",{className:"modal fade",id:"exampleModalCenter",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"ml-10",id:"exampleModalLongTitle",children:"Login Here"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body h-100",style:{backgroundColor:"#000"},children:Object(c.jsx)("div",{className:"col-md-12 col-md-offset-3 my-5",children:Object(c.jsxs)("form",{children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{style:{color:"white"},children:"Email address"}),Object(c.jsx)("input",{type:"email",className:" form-control form-control-lg border border-info",name:"email",placeholder:"Enter Email",onChange:l})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{style:{color:"white"},children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control form-control-lg border border-info",name:"password",placeholder:"Password",onChange:l})]}),Object(c.jsx)("button",{type:"submit",className:"btnn",onClick:function(t){t.preventDefault(),console.log(o),p.post("token/",{email:o.email,password:o.password}).then((function(t){localStorage.setItem("access_token",t.data.access),localStorage.setItem("refresh_token",t.data.refresh),p.defaults.headers.Authorization="JWT "+localStorage.getItem("access_token"),e.push({pathname:"/"}),window.location.reload()}))},"data-dismiss":"modal",children:"Submit"})]})})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",style:{backgroundColor:"#000"},children:"Close"})})]})})})},C=function(){var e=Object(i.f)(),t=Object.freeze({email:"",username:"",password:""}),a=Object(n.useState)(t),s=Object(f.a)(a,2),o=s[0],r=s[1],l=function(e){r(Object(_.a)(Object(_.a)({},o),{},Object(w.a)({},e.target.name,e.target.value.trim())))};return Object(c.jsx)("div",{className:"modal fade",id:"exampleModalCenterr",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true",children:Object(c.jsx)("div",{className:"modal-dialog modal-dialog-centered",role:"document",children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h5",{className:"ml-10",id:"exampleModalLongTitle",children:"Register Here"}),Object(c.jsx)("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",children:Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]}),Object(c.jsx)("div",{className:"modal-body h-100 ",style:{backgroundColor:"#000"},children:Object(c.jsx)("div",{className:"col-md-12 col-md-offset-3 my-5",children:Object(c.jsxs)("form",{className:"my-3",children:[Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{style:{color:"white"},children:"Email address"}),Object(c.jsx)("input",{type:"email",className:"form-control border border-info",name:"email",placeholder:"Enter Email",onChange:l})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{style:{color:"white"},children:"User Name"}),Object(c.jsx)("input",{type:"text",className:"form-control border border-info",name:"username",placeholder:"Enter Username",onChange:l})]}),Object(c.jsxs)("div",{className:"form-group",children:[Object(c.jsx)("label",{style:{color:"white"},children:"Password"}),Object(c.jsx)("input",{type:"password",className:"form-control border border-info",name:"password",placeholder:"Password",onChange:l})]}),Object(c.jsxs)("button",{type:"submit",className:"btnn",onClick:function(t){p.post("user/register/",{email:o.email,user_name:o.username,password:o.password}).post("token/",{email:o.email,password:o.password}).then((function(t){e.push("/login"),console.log(t),console.log(t.data),e.push({pathname:"/"}),window.location.reload()}))},children:["Submit",Object(c.jsx)(S,{})]})]})})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal",style:{backgroundColor:"#000"},children:"Close"})})]})})})},I=function(){var e="",t=localStorage.getItem("access_token")?localStorage.getItem("access_token"):null;if(t){var n=t;e=a(85).decode(n).user_id}return Object(c.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark ",style:{backgroundColor:"#000"},children:[Object(c.jsx)(l.b,{to:"/",style:{color:"#00FFFF",fontSize:"40px",marginRight:"10px"},children:"ECM"}),Object(c.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(c.jsx)("span",{className:"navbar-toggler-icon"})}),Object(c.jsxs)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:[Object(c.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsxs)(l.c,{className:"btnn",exact:!0,to:"",children:["Home ",Object(c.jsx)("span",{className:"sr-only",children:"(current)"})]})})}),Object(c.jsxs)("ul",{className:"navbar-nav",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("button",{type:"button",className:"btnn","data-toggle":"modal","data-target":"#exampleModalCenter",children:"Login"})}),Object(c.jsx)(S,{})]}),!e&&Object(c.jsxs)("div",{children:[Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)("button",{type:"button",className:"btnn","data-toggle":"modal","data-target":"#exampleModalCenterr",children:"Register"})}),Object(c.jsx)(C,{})]}),e&&Object(c.jsx)("li",{className:"nav-item",children:Object(c.jsx)(l.c,{className:"btnn",exact:!0,to:"/logout",children:"Logout"})})]})]})]})};a(287);function T(){var e=Object(i.f)();return Object(n.useEffect)((function(){p.post("user/logout/blacklist/",{refresh_token:localStorage.getItem("refresh_token")});localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),p.defaults.headers.Authorization=null,e.push("/"),window.location.reload()})),Object(c.jsx)("div",{children:"Logout"})}var E=function(){return Object(c.jsxs)(l.a,{children:[Object(c.jsx)(I,{}),Object(c.jsxs)(i.c,{children:[Object(c.jsx)(i.a,{exact:!0,path:"/",component:k}),Object(c.jsx)(i.a,{exact:!0,path:"/logout",component:T}),Object(c.jsx)(i.a,{exact:!0,path:"/login",component:S}),Object(c.jsx)(i.a,{exact:!0,path:"/carts",component:x}),Object(c.jsx)(i.a,{exact:!0,path:"/carts/cartitem",component:g})]})]})};r.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(E,{})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.dd371805.chunk.js.map